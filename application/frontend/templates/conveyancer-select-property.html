{% extends "servicefrontend_base.html" %}

{% block content %}

<main id="wrapper" role="main">

    <div id="content">
        {% include "inc_alpha_banner.html" %}

        <div class="outer-block">
            <div class="inner-block">

                <h1 class="heading-large">Select property</h1>

                {% if title %}

                <ul class="results-list">
                    <li class="result">

                         <p>Title number: {{ title.title_number }}</p>

                          {% if address.structured %}

                            <div class="grid grid-1-3">
                                <div itemscope itemtype="http://schema.org/PostalAddress">
                                    <span itemprop="streetAddress">
                                        {{ address.structured.house_no }} {{ address.structured.street_name }}<br>
                                    </span>
                                    <span itemprop="addressLocality">
                                        {{ address.structured.town }}<br>
                                    </span>
                                    <span itemprop="addressRegion">
                                        {% if address.structured.postal_county %}
                                            {{ address.structured.postal_county }}<br>
                                        {% endif %}
                                        {% if address.structured.region_name %}
                                            {{ address.structured.region_name }}<br>
                                        {% endif %}
                                    </span>
                                    <span itemprop="postalCode">{{ address.structured.postcode }}<br></span>
                                    {% if address.structured.country %}
                                        <span itemprop="addressCountry">{{ address.structured.country }}</span>
                                    {% endif %}
                                </div>
                            </div>

                        {% else %}

                            <div class="grid grid-1-3">
                                {% for item in address.string.get_fields()  %}
                                    {{ item }}<br>
                                {% endfor %}
                            </div>

                        {% endif %}

                        <form class="form" action="/relationship/conveyancer/task" method="POST">
                            <input type="hidden" name="title_no" value="{{ title.title_number }}">
                            <input type="hidden" name="property_full_address" value="{{address.string.get_string()}}">
                            <p>
                                <input type="submit" class="button" value="Select this property">
                            </p>
                        </form>

                        </div>
                        <div class="grid grid-1-4">
                            <div id="map" class="title-plan" style="width:240px; height:160px;">
                            </div>
                        </div>

                    </li>
                </ul>

                {% else %}
                    <p>No results found</p>
                {% endif %}

            </div>
        </div>


    </div>
</main>

{% endblock %}


{% block js_additionals %}
<script type='text/javascript'>
    var extentData = {{ title.extent | tojson}};
    var easementData = null;
    var apiKey = "{{ apiKey }}";
</script>
<script src="{{asset_path}}/javascripts/map.js"></script>
{% endblock %}
